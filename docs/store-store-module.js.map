{"version":3,"sources":["./src/app/modules/store/store.module.ts","./src/app/modules/store/page/store-list/store-list.component.ts","./src/app/modules/store/page/store-list/store-list.component.html","./src/app/modules/store/service/store.service.ts","./src/app/core/guards/admin.guard.ts","./src/app/modules/store/store.routing.ts"],"names":[],"mappings":"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","file":"store-store-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { storeRoutes } from './store.routing';\nimport { StoreListComponent } from './page/store-list/store-list.component';\nimport { SharedModule } from '@app/shared/shared.module';\n\n\n@NgModule({\n  declarations: [StoreListComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    RouterModule.forChild(storeRoutes)\n  ]\n})\nexport class StoreModule { }\n","import { Component, OnInit } from '@angular/core';\r\nimport { StoreService } from '../../service/store.service';\r\nimport { BaseListComponent } from '@app/modules/common/base-list-component';\r\nimport { Store } from '../../models/store';\r\nimport { NzTableQueryParams } from 'ng-zorro-antd/table';\r\n\r\n@Component({\r\n  selector: 'app-store-list',\r\n  templateUrl: './store-list.component.html',\r\n  styleUrls: ['./store-list.component.css'],\r\n})\r\nexport class StoreListComponent\r\n  extends BaseListComponent<Store>\r\n  implements OnInit {\r\n  constructor(private readonly storeService: StoreService) {\r\n    super(storeService);\r\n  }\r\n\r\n  pageIndex = 0;\r\n  pageSize = 5;\r\n\r\n  ngOnInit(): void { }\r\n\r\n  searchByName() {\r\n    this.baseParams.filters = [{ key: \"storeName\", value: this.searchValue }];\r\n    // super.search();\r\n    console.log(this.listData);\r\n\r\n  }\r\n\r\n  onQueryParamsChange = (params: NzTableQueryParams) => {\r\n    this.baseParams.filters = [{ key: \"storeName\", value: this.searchValue }];\r\n    super.onQueryParamsChangeFromParent(params);\r\n  }\r\n}\r\n","<div>\r\n  <nz-input-group [nzSuffix]=\"suffixIconSearch\">\r\n    <input type=\"text\" nz-input (keyup.enter)=\"searchByName()\" placeholder=\"Search\" [(ngModel)]=\"searchValue\" />\r\n  </nz-input-group>\r\n  <ng-template #suffixIconSearch>\r\n    <i nz-icon nzType=\"search\" (click)=\"searchByName()\"></i>\r\n  </ng-template>\r\n</div>\r\n<br>\r\n<nz-table #sortTable [nzFrontPagination]=\"false\" [nzTotal]=\"total\" [nzPageSize]=\"baseParams.pageSize\"\r\n  [nzPageIndex]=\"baseParams.pageIndex\" nzBordered [nzLoading]=\"isLoading\" (nzQueryParams)=\"onQueryParamsChange($event)\"\r\n  [nzData]=\"listData\" nzTableLayout=\"fixed\">\r\n  <thead>\r\n    <tr>\r\n      <th [nzWidth]=\"'6%'\" nzAlign=\"center\" nzColumnKey=\"id\" [nzSortFn]=\"true\">Id</th>\r\n      <th [nzWidth]=\"'12%'\" nzAlign=\"center\">Store Name</th>\r\n      <th nzAlign=\"center\">Address</th>\r\n      <th [nzWidth]=\"'10%'\" nzAlign=\"center\">Open</th>\r\n      <th [nzWidth]=\"'10%'\" nzAlign=\"center\">Close</th>\r\n      <th nzAlign=\"center\">Website</th>\r\n      <th nzAlign=\"center\">Action</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let data of sortTable.data; let odd=odd; let even = even\" [ngClass]=\"{ odd: odd, even: even }\">\r\n      <td nzAlign=\"center\">{{ data.id }}</td>\r\n      <td nzAlign=\"center\">{{ data.storeName }}</td>\r\n      <td nzAlign=\"center\">{{ data.address.addressName }}</td>\r\n      <td nzAlign=\"center\">{{ data.openTime }}</td>\r\n      <td nzAlign=\"center\">{{ data.closeTime }}</td>\r\n      <td nzAlign=\"center\"><a [href]=\"data.website\" target=\"_blank\">{{data.website}}</a> </td>\r\n      <td nzAlign=\"center\" class=\"btn-action\">\r\n        <button nz-button nzType=\"primary\" nzPopconfirmOverlayClassName=\"delete-confirm-card\" nz-popconfirm\r\n          nzPopconfirmTitle=\"Are you sure delete this size?\" (nzOnConfirm)=\"delete(data.id)\"\r\n          nzPopconfirmPlacement=\"left\" nzDanger>Delete<i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i></button>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</nz-table>\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { BaseService } from '@app/modules/common/base-service';\r\nimport { Store } from '../models/store';\r\nimport { BaseParams } from '../../common/base-params';\r\nimport { Observable, of } from 'rxjs';\r\nimport { BaseResponse } from '@app/modules/common/base-response';\r\nimport { environment } from '@env';\r\nimport { catchError, tap, map } from 'rxjs/operators';\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class StoreService implements BaseService<Store> {\r\n  constructor(private readonly httpClient: HttpClient) { }\r\n\r\n  getAll(baseParams: BaseParams) {\r\n    let params = new HttpParams()\r\n      .append('page', `${baseParams.pageIndex - 1}`)\r\n      .append('pageSize', `${baseParams.pageSize}`);\r\n\r\n    if (baseParams.sortField != null) {\r\n      params = params\r\n        .append('sortField', `${baseParams.sortField}`)\r\n        .append('sortOrder', `${baseParams.sortOrder}`);\r\n    }\r\n\r\n    if (baseParams.filters.length > 0) {\r\n      baseParams.filters.forEach((filter) => {\r\n        params = params.append(filter.key, filter.value);\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .get<any>(`${environment.productServiceUrl}/api/store`, {\r\n        params\r\n      })\r\n      .pipe(\r\n        map(res => {\r\n          if (res.code == \"OK\") {\r\n            res.data.content.map(x => {\r\n              x.address = JSON.parse(x.address);\r\n              return x;\r\n            })\r\n          }\r\n          return res;\r\n        }),\r\n        catchError((error) => {\r\n          return of(error.error);\r\n        })\r\n      );\r\n  }\r\n\r\n  create(data: Store): Observable<BaseResponse<Store>> {\r\n    return null;\r\n  }\r\n\r\n  delete(id: number, baseParams: BaseParams) {\r\n    let params = new HttpParams()\r\n      .append('page', `${baseParams.pageIndex - 1}`)\r\n      .append('pageSize', `${baseParams.pageSize}`);\r\n\r\n    if (baseParams.sortField != null) {\r\n      params = params\r\n        .append('sortField', `${baseParams.sortField}`)\r\n        .append('sortOrder', `${baseParams.sortOrder}`);\r\n    }\r\n\r\n    if (baseParams.filters.length > 0) {\r\n      baseParams.filters.forEach((filter) => {\r\n        params = params.append(filter.key, filter.value);\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .delete<BaseResponse<Store>>(\r\n        `${environment.productServiceUrl}/api/store/${id}`,\r\n        { params }\r\n      )\r\n      .pipe(\r\n        catchError((error) => {\r\n          return of(error.error);\r\n        })\r\n      );\r\n  }\r\n}\r\n","import { UtilitiesService } from './../services/utilities/utilities.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AdminGuard implements CanActivate {\r\n  constructor(private readonly utilitiesService: UtilitiesService, private readonly router: Router) { }\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot): boolean {\r\n    if (this.utilitiesService.getRole() == \"Admin\") {\r\n      return true;\r\n    }\r\n    this.router.navigate(['/auth/login']);\r\n  }\r\n\r\n}\r\n","import { AdminGuard } from './../../core/guards/admin.guard';\r\nimport { Routes } from '@angular/router';\r\nimport { StoreListComponent } from '../store/page/store-list/store-list.component';\r\n\r\nexport const storeRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: StoreListComponent,\r\n    canActivate: [AdminGuard]\r\n  }\r\n]\r\n"],"sourceRoot":"webpack:///"}